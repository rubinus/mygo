<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <!-- Page title -->
    <title>user</title>
    <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
    <!--<link rel="shortcut icon" type="image/ico" href="favicon.ico" />-->
    <!-- Vendor styles -->
    <link rel="stylesheet" href="http://ua.apps.tvm.cn/programList/vendor/fontawesome/css/font-awesome.css"/>
    <link rel="stylesheet" href="http://ua.apps.tvm.cn/programList/vendor/metisMenu/dist/metisMenu.css"/>
    <link rel="stylesheet" href="http://ua.apps.tvm.cn/programList/vendor/animate.css/animate.css"/>
    <link rel="stylesheet" href="http://ua.apps.tvm.cn/programList/vendor/bootstrap/dist/css/bootstrap.css"/>

    <link rel="stylesheet" href="http://ua.apps.tvm.cn/programList/styles/sweet-alert.css"/>
    <link rel="stylesheet" href="http://ua.apps.tvm.cn/programList/styles/toastr.min.css"/>

    <!-- App styles -->
    <link rel="stylesheet" href="http://ua.apps.tvm.cn/programList/fonts/pe-icon-7-stroke/css/pe-icon-7-stroke.css"/>
    <link rel="stylesheet" href="http://ua.apps.tvm.cn/programList/fonts/pe-icon-7-stroke/css/helper.css"/>
    <link rel="stylesheet" href="http://ua.apps.tvm.cn/programList/vendor/fullcalendar/dist/fullcalendar.min.css">
    <link rel="stylesheet" href="http://ua.apps.tvm.cn/programList/styles/style.css">

    <link rel="stylesheet" href="http://ua.apps.tvm.cn/programList/styles/app.css">

    <link href="http://ua.apps.tvm.cn/programList/styles/jquery.mCustomScrollbar.css" rel="stylesheet">

    <link href="http://ua.apps.tvm.cn/programList/vendor/iCheck/skins/all.css" rel="stylesheet">

    <link rel="stylesheet" type="text/css" media="all"
          href="http://ua.apps.tvm.cn/programList/vendor/bootstrap-datepicker-master/dist/css/daterangepicker-bs3.css"/>

    <script src="http://ua.apps.tvm.cn/programList/vendor/jquery/dist/jquery.min.js"></script>
    <!-- Vendor scripts -->
    <script src="http://ua.apps.tvm.cn/programList/vendor/jquery-ui/jquery-ui.min.js"></script>
    <script src="http://ua.apps.tvm.cn/programList/vendor/slimScroll/jquery.slimscroll.min.js"></script>

    <script src="http://ua.apps.tvm.cn/programList/vendor/bootstrap/dist/js/bootstrap.min.js"></script>

    <script src="http://ua.apps.tvm.cn/programList/vendor/metisMenu/dist/metisMenu.js"></script>

    <script src="http://ua.apps.tvm.cn/programList/vendor/iCheck/icheck.min.js"></script>

    <script src="http://ua.apps.tvm.cn/programList/vendor/peity/jquery.peity.min.js"></script>

    <script src="http://ua.apps.tvm.cn/programList/vendor/sparkline/index.js"></script>

    <script type="text/javascript" src="http://ua.apps.tvm.cn/programList/scripts/jquery.mCustomScrollbar.concat.min.js"></script>

    <script type="text/javascript" src="http://ua.apps.tvm.cn/programList/scripts/toastr.min.js"></script>

    <script src="http://ua.apps.tvm.cn/programList/scripts/bootstrap-paginator.min.js"></script>

    <script src="http://ua.apps.tvm.cn/programList/vendor/moment/moment.js"></script>

    <script type="text/javascript"
            src="http://ua.apps.tvm.cn/programList/vendor/bootstrap-datepicker-master/dist/js/daterangepicker.js"></script>

    <script type="text/javascript" src="http://ua.apps.tvm.cn/javascripts/bootstrap-suggest.min.js"></script>
    <!-- Navigation -->

    <link href="http://ua.apps.tvm.cn/programList/styles/jquery.mCustomScrollbar.css" rel="stylesheet">

    <!-- Main Wrapper -->
    <link rel="stylesheet" href="http://ua.apps.tvm.cn/programList/styles/sweet-alert.css"/>

    <!-- App scripts -->
    <script src="http://ua.apps.tvm.cn/programList/scripts/homer.js"></script>
    <script src="http://ua.apps.tvm.cn/programList/scripts/charts.js"></script>

    <link rel="stylesheet" href="http://ua.apps.tvm.cn/programList/styles/app.css">
    <script type="text/javascript" src="http://ua.apps.tvm.cn/programList/scripts/app.js"></script>
    <script type="text/javascript" src="http://ua.apps.tvm.cn/programList/scripts/jquery.mCustomScrollbar.concat.min.js"></script>
    <script type="text/javascript" src="http://ua.apps.tvm.cn/programList/scripts/jBootstrapPage.js"></script>

    <script type="text/javascript" src="http://ua.apps.tvm.cn/programList/scripts/sweet-alert.js"></script>
    <script type="text/javascript" src="http://ua.apps.tvm.cn/javascripts/underscore-min.js"></script>
    <style>
        .modal-open {
            overflow: initial !important;
        }

        .normalheader h2 {
            font-size: 20px;
        }
    </style>
    <style>
        .plus {
            /*margin-left: 560px;*/
            margin-bottom: 20px;
            float: right;
            margin-right: 16px;
        }

        .fileInput {
            position: absolute;
            z-index: 2;
            opacity: 0;
            cursor: pointer;
        }

        .fileInput2 {
            position: absolute;
            z-index: 2;
            opacity: 0;
            cursor: pointer;
            top: 46px;
        }

        .right0 {
            padding-right: 0;
        }

        .left0 {
            padding-left: 0;
        }

        .left1 {
            margin-right: 0;
            padding-right: 0;
        }
    </style>
</head>
<style>
    .normalheader h2 {
        font-size:20px;
    }
    @media (min-width: 1200px) {
        .h4-ext{
            fon-size:14px;
        }
    }
    .hpanel .panel-body{
        padding: 5px;
    }
</style>

<div class="wrapper">
    <div class="normalheader transition animated fadeIn small-header">
        <div class="hpanel">
            <div class="panel-body">
                <h2 class="col-md-1" >用户信息：</h2>
                <div class="col-md-2">
                    <div class="input-group">
                        <input type="text" placeholder="请输入nickname..." value="" class="form-control "id="nickname">
                        <span class="input-group-btn">
                            <button class="btn btn-info" id="search" type="button">
                                <span aria-hidden="true" class="glyphicon glyphicon-search"></span>
                            </button>
                        </span>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="input-group">
                        <input type="text" placeholder="请输入头像url..." value="" class="form-control "id="headimgurl">
                        <span class="input-group-btn">
                            <button class="btn btn-info" id="searchUrl" type="button">
                                <span aria-hidden="true" class="glyphicon glyphicon-search"></span>
                            </button>
                        </span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="content">
        <div class="row" id="users">

        </div>

    </div>
</div>
<script type="text/javascript">
    $("#search").click(function () {
        var nickname = $("#nickname").val();
        $("#headimgurl").val("");
        getUser(nickname);
    });
    $("#nickname").focus(function () {
        $("#headimgurl").val("");
    });
    $("#searchUrl").click(function () {
        var headimgurl = $("#headimgurl").val();
        BindUsers(headimgurl);
    });

    function getUser(nickname){
        $.ajax({
            url: '/messages/list',
            type: "get",
            timeout: 30000,
            async:false,
            success: function (data, status) {
                alert(1)
                if (data.status == 200) {
                    BindUsers.list = data.data;
                    BindUsers("");
                }
            }
        });
    }
    function BindUsers(condition){
        $("#users").html("");
        var list = BindUsers.list;
        if (list.length == 0)
            return;
        for (var i = 0; i < list.length; i++) {
            console.log(i,list[i])
            var user_html = '<div class="col-lg-3 ">' +
                    '<div class="hpanel hgreen contact-panel animated-panel zoomIn">' +
                    '<div class="hpanel ">' +
                    '<div class="panel-body">' +
                    '<div class="text-center">' +
                    '<h5 class="m-b-xs"><span>unionid:</span><input type="text" value="' + list[i].headimgurl + '"></h5>' +
                    '<h5 class="m-b-xs"><span>minopenid:</span><input type="text" value="' + list[i].nickname + '"></h5>' +
                    '<div>' +
                    '<img src="' + list[i].headimgurl + '" style="border-radius: 5px 5px 5px 5px !important;height: 90px;margin: 10px;width: 90px;" />' +
                    '</div>' +
                    '<h5 class="m-b-xs"><span>userid:</span><input type="text" value="' + list[i].appid + '"></h5>' +
                    '</div>' +
                    '</div>' +
                    '</div>' +
                    '</div>' +
                    '</div>';
            $("#users").append(user_html);
        }
    }
    BindUsers.list = [];
</script>
